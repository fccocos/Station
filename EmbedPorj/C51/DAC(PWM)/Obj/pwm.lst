C51 COMPILER V9.01   PWM                                                                   06/22/2022 17:33:14 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE PWM
OBJECT MODULE PLACED IN .\Obj\pwm.obj
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE App\PWM\pwm.c BROWSE INCDIR(.\App\PWM;.\Public) DEBUG OBJECTEXTEND PRINT(.\
                    -Obj\pwm.lst) OBJECT(.\Obj\pwm.obj)

line level    source

   1          #include "pwm.h"
*** ERROR C202 IN LINE 6 OF APP\PWM\PWM.H: 'p2': undefined identifier
   2          
   3          u8 gtime_h = 0;    // 定时器高八位
   4          u8 gtime_l = 0;    // 定时器低八位
   5          u8 gduty = 0;      // 占空比
   6          u8 gtime_scale = 0;// pwm周期 = 初始定时器的值*time_scale
   7          
   8          void pwm_init(u8 time_h, u8 time_l, u16 time_scale, u8 duty)
   9          {
  10   1          gtime_h = time_h;
  11   1          gtime_l = time_l;
  12   1          gtime_scale = time_scale;
  13   1          gduty = duty;
  14   1      
  15   1          /*定时器的初始化*/
  16   1          TMOD |= 0x01;  // 选选择定时器0模式，工作方式1
  17   1          TH0 = gtime_h; // 设置定时器的初始值
  18   1          TL0 = gtime_l;
  19   1          ET0 = 1;      // 打开定时器0中断允许
  20   1          EA = 1;       // 打开总中断
  21   1          TR0 = 1;      // 打开定时器
  22   1      }
  23          
  24          void pwm__set_duty(u8 duty)
  25          {
  26   1          gduty = duty;
  27   1      }
  28          
  29          void pwm_timer(void) interrupt 1 // 定时器0中断函数
  30          {
  31   1          static u16 time = 0;
  32   1          
  33   1          TH0 = gtime_h;
  34   1          TL0 = gtime_l;
  35   1      
  36   1          time++;
  37   1          if(time>=gtime_scale)
  38   1              time = 0;
  39   1          if(time <=gduty)
  40   1              pwm = 1;
*** ERROR C202 IN LINE 40 OF APP\PWM\PWM.C: 'pwm': undefined identifier
  41   1          else
  42   1              pwm = 0;
*** ERROR C202 IN LINE 42 OF APP\PWM\PWM.C: 'pwm': undefined identifier
  43   1      }

C51 COMPILATION COMPLETE.  0 WARNING(S),  3 ERROR(S)
